{% extends 'library/layout.html' %}
{% load static %}
{% block body %}
<div class="container mt-5 px-4">
    <div class="row row-cols-1 row-cols-md-2 justify-content-center gx-5 gy-3 ">
        <div class="col col-md-2">
            <img class="m-auto p-2" src="{% static 'library/images/person.svg' %}" alt="author-picture" style="max-width: 120px;">
        </div>
        <div class="col-auto col-md-auto author-border">
            <div class="px-3 pt-2">
                {% if request.user.is_authenticated %}
                {% if follow_bool %}
                <h1 class="book-title">{{user.username}} <span><button class="btn btn-primary" id="follow" data-userid="{{user.id}}">Following</button></span></h1>
                {% else %}
                <h1 class="book-title">{{user.username}} <span><button class="btn btn-outline-primary" id="follow" data-userid="{{user.id}}">Follow</button></span></h1>
                {% endif %}
                {% else %}
                <h1 class="book-title">{{user.username}}</h1>
                {% endif %}
                <div class="book-desc">
                    <p class="mb-0">Information about the user</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mt-5" style="max-width: 1200px;">
    <h2 class="ms">User Reviews</h2>
    {% for review in reviews %}
    <div class="row ms-5">
        <div class="card mb-3 clickme border">
            <div class="row flex-nowrap">
            <div class="col-md-2 d-flex flex-column justify-content-center align-items-center ">
                <img class="m-auto" src="{% static 'library/images/person.svg' %}" alt="profile" style="max-width:80px;">
                <p class="mx-auto oneliner">{{review.user_id.username}}</p>
            </div>
            <div class="col-md-9">
                <div class="card-body">
                <h5 class="card-title">
                    <div class="star-outer">
                    <div class="star-inner" data-rating="{{review.rating}}"></div>
                </div></h5>
                <p class="card-text twoliner">{{review.text}}</p>
                <p class="card-text"><small class="text-muted">Review on {{review.date}}</small><button type="button" class="btn btn-primary ms-3" data-bs-toggle="modal" data-bs-target="#exampleModal" id="read-review" data-username="{{review.user_id.username}}">Read Review</button></p>
                </div>
            </div>
            </div>
        </div>
    </div>
    {% empty %}
    <h5 class="text-center">No reviews yet.</h5>
    {% endfor %}
</div>

<div class="container mt-3" style="max-width: 1200px;">
    <h2 class="ms">Following</h2>
    {% for review in reviews %}
    <div class="row ms-5">
        <div class="card mb-3 clickme border">
            <div class="row flex-nowrap">
            <div class="col-md-2 d-flex flex-column justify-content-center align-items-center ">
                <img class="m-auto" src="{% static 'library/images/person.svg' %}" alt="profile" style="max-width:80px;">
                <p class="mx-auto oneliner">{{review.user_id.username}}</p>
            </div>
            <div class="col-md-9">
                <div class="card-body">
                <h5 class="card-title">
                    <div class="star-outer">
                    <div class="star-inner" data-rating="{{review.rating}}"></div>
                </div></h5>
                <p class="card-text twoliner">{{review.text}}</p>
                <p class="card-text"><small class="text-muted">Review on {{review.date}}</small><button type="button" class="btn btn-primary ms-3" data-bs-toggle="modal" data-bs-target="#exampleModal" id="read-review" data-username="{{review.user_id.username}}">Read Review</button></p>
                </div>
            </div>
            </div>
        </div>
    </div>
    {% empty %}
    <h5 class="text-center">No following.</h5>
    {% endfor %}
</div>

<div class="container mt-3">
    <p>Your Lists</p>
</div>
{% endblock %}
{% block script %}
<script src="{% static 'library/follow.js' %}" type="module"></script>
{% endblock %}